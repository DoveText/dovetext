(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7722],{661:function(e,t,a){Promise.resolve().then(a.bind(a,3604))},3604:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var r=a(3827),n=a(4090),s=a(9359),l=a(6564);let i={EMAIL:{id:"EMAIL",label:"Email",icon:"mail",configFields:[{name:"email",type:"email",required:!0,label:"Email Address",placeholder:"recipient@example.com"},{name:"format",type:"select",options:["html","text"],defaultValue:"html",label:"Format"},{name:"enableReply",type:"boolean",defaultValue:!1,label:"Enable Reply"},{name:"replyToAddress",type:"email",conditionalOn:"enableReply",label:"Reply-To Address",placeholder:"replies@example.com"}],generateDescription:e=>"Email notification to ".concat(e.email)},SLACK:{id:"SLACK",label:"Slack",icon:"chat",configFields:[{name:"webhookUrl",type:"url",required:!0,label:"Webhook URL",placeholder:"https://hooks.slack.com/services/..."},{name:"channel",type:"text",defaultValue:"#general",label:"Channel",placeholder:"#channel or @username"},{name:"username",type:"text",defaultValue:"Dove Text",label:"Username"},{name:"iconEmoji",type:"text",defaultValue:":dove:",label:"Emoji Icon",placeholder:":emoji:"}],generateDescription:e=>"Slack notification to ".concat(e.channel||"#general")},TEXT:{id:"TEXT",label:"Text Message (SMS)",icon:"phone",configFields:[{name:"phoneNumber",type:"phone",required:!0,label:"Phone Number",placeholder:"+1234567890"},{name:"provider",type:"select",options:["TWILIO","BANDWIDTH","AWS"],defaultValue:"TWILIO",label:"Provider"},{name:"enableReply",type:"boolean",defaultValue:!1,label:"Enable Reply"},{name:"replyCallbackUrl",type:"url",conditionalOn:"enableReply",label:"Reply Callback URL",placeholder:"https://your-app.com/api/sms-replies"}],generateDescription:e=>"Text message to ".concat(e.phoneNumber)},VOICE:{id:"VOICE",label:"Voice Call",icon:"phone",configFields:[{name:"phoneNumber",type:"phone",required:!0,label:"Phone Number",placeholder:"+1234567890"},{name:"provider",type:"select",options:["TWILIO","BANDWIDTH"],defaultValue:"TWILIO",label:"Provider"},{name:"language",type:"select",options:["en-US","en-GB","es-ES","fr-FR","de-DE"],defaultValue:"en-US",label:"Language"},{name:"voice",type:"select",options:["male","female"],defaultValue:"female",label:"Voice"},{name:"enableActions",type:"boolean",defaultValue:!1,label:"Enable User Actions"},{name:"actionCallbackUrl",type:"url",conditionalOn:"enableActions",label:"Action Callback URL",placeholder:"https://your-app.com/api/voice-actions"}],generateDescription:e=>"Voice call to ".concat(e.phoneNumber)},WEBHOOK:{id:"WEBHOOK",label:"Webhook",icon:"code",configFields:[{name:"url",type:"url",required:!0,label:"Webhook URL",placeholder:"https://api.example.com/webhook"},{name:"method",type:"select",options:["GET","POST","PUT"],defaultValue:"POST",label:"HTTP Method"},{name:"contentType",type:"select",options:["application/json","application/x-www-form-urlencoded","text/plain"],defaultValue:"application/json",label:"Content Type"},{name:"authType",type:"select",options:["none","basic","bearer","custom"],defaultValue:"none",label:"Authentication Type"},{name:"username",type:"text",conditionalOn:{field:"authType",value:"basic"},label:"Username"},{name:"password",type:"password",conditionalOn:{field:"authType",value:"basic"},label:"Password"},{name:"bearerToken",type:"password",conditionalOn:{field:"authType",value:"bearer"},label:"Bearer Token"}],generateDescription:e=>"Webhook notification to ".concat(e.url)}};function o(e,t){let a=i[e];if(!a)throw Error("Unsupported method type: ".concat(e));let r={name:t.name||"".concat(a.label," Notification"),type:e,description:a.generateDescription(t),config:{}};return a.configFields.forEach(e=>{void 0!==t[e.name]?r.config[e.name]=t[e.name]:void 0!==e.defaultValue&&(r.config[e.name]=e.defaultValue)}),r}let c={async getAllMethods(){let{data:e}=await l.x.get("/api/v1/methods");return e},async getMethodById(e){let{data:t}=await l.x.get("/api/v1/methods/".concat(e));return t},async testDelivery(e){let{data:t}=await l.x.post("/api/v1/test-delivery",e);return t},async createMethod(e,t){let a=o(e,t),{data:r}=await l.x.post("/api/v1/methods",a);return r},async createSlackMethod(e){return this.createMethod("SLACK",e)},async createEmailMethod(e){return this.createMethod("EMAIL",e)},async createTextMethod(e){return this.createMethod("TEXT",e)},async createVoiceMethod(e){return this.createMethod("VOICE",e)},async createWebhookMethod(e){return this.createMethod("WEBHOOK",e)},async updateMethod(e,t,a){let r=o(t,a),{data:n}=await l.x.put("/api/v1/methods/".concat(e),r);return n},async deleteMethod(e){await l.x.delete("/api/v1/methods/".concat(e))},async setDefaultMethod(e){let{data:t}=await l.x.post("/api/v1/methods/".concat(e,"/default"));return t}};var d=e=>{let{type:t,initialValues:a={},onSubmit:s,onCancel:l,isSubmitting:o}=e,c=i[t],[d,u]=(0,n.useState)(a),[m,p]=(0,n.useState)({});if(!c)return(0,r.jsxs)("div",{className:"text-red-500",children:["Unknown method type: ",t]});let x=(e,t)=>{u(a=>({...a,[e]:t})),m[e]&&p(t=>{let a={...t};return delete a[e],a})},h=()=>{let e={};return c.configFields.forEach(t=>{t.required&&!d[t.name]&&(e[t.name]="".concat(t.label," is required"))}),d.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)&&(e.email="Please enter a valid email address"),d.phoneNumber&&!/^\+?[1-9]\d{1,14}$/.test(d.phoneNumber)&&(e.phoneNumber="Please enter a valid phone number (E.164 format)"),d.url&&!/^https?:\/\//.test(d.url)&&(e.url="Please enter a valid URL (starting with http:// or https://)"),d.webhookUrl&&!/^https?:\/\//.test(d.webhookUrl)&&(e.webhookUrl="Please enter a valid webhook URL (starting with http:// or https://)"),p(e),0===Object.keys(e).length},f=async e=>{e.preventDefault(),h()&&await s(d)},y=e=>{if(!e.conditionalOn)return!0;if("string"==typeof e.conditionalOn)return!!d[e.conditionalOn];{let{field:t,value:a}=e.conditionalOn;return d[t]===a}};return(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:d.name||"",onChange:e=>x("name",e.target.value),className:"block w-full rounded-md border border-gray-500 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"".concat(c.label," Notification"),required:!0}),m.name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.name})]}),c.configFields.map(e=>{var t;return y(e)?(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label," ",e.required&&(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),"select"===e.type&&(0,r.jsx)("select",{id:e.name,name:e.name,value:d[e.name]||e.defaultValue||"",onChange:t=>x(e.name,t.target.value),className:"block w-full rounded-md border border-gray-500 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:e.required,children:null===(t=e.options)||void 0===t?void 0:t.map(e=>(0,r.jsx)("option",{value:e,children:e},e))}),"boolean"===e.type&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)("label",{className:"inline-flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",className:"rounded border border-gray-500 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",checked:!!d[e.name],onChange:t=>x(e.name,t.target.checked)}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:e.label})]})}),("text"===e.type||"email"===e.type||"url"===e.type||"phone"===e.type)&&(0,r.jsx)("input",{type:"email"===e.type?"email":"url"===e.type?"url":"text",id:e.name,name:e.name,value:d[e.name]||"",onChange:t=>x(e.name,t.target.value),className:"block w-full rounded-md border border-gray-500 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:e.placeholder,required:e.required}),"password"===e.type&&(0,r.jsx)("input",{type:"password",id:e.name,name:e.name,value:d[e.name]||"",onChange:t=>x(e.name,t.target.value),className:"block w-full rounded-md border border-gray-500 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:e.placeholder,required:e.required}),"keyValuePairs"===e.type&&(0,r.jsx)("div",{className:"mt-2 space-y-2",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Key-value pair editor (not implemented in this example)"})}),m[e.name]&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m[e.name]}),e.description&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.description})]},e.name):null}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-5",children:[(0,r.jsx)("button",{type:"button",onClick:l,className:"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:o,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:o,children:o?"Saving...":"Save"})]})]})},u=a(8792),m=a(3536),p=a(9643),x=a(8005),h=a(5548),f=a(4424),y=a(8621),g=a(2708),b=a(129),v=a(6170);function j(){var e;let{user:t}=(0,s.useAuth)(),[a,l]=(0,n.useState)([]),[o,j]=(0,n.useState)(!0),[N,w]=(0,n.useState)(null),[I,T]=(0,n.useState)(null),[k,D]=(0,n.useState)(!1),[C,E]=(0,n.useState)(!1),[R,S]=(0,n.useState)(!1),[M,P]=(0,n.useState)(!1),[O,A]=(0,n.useState)(!1),[F,V]=(0,n.useState)(null),[L,U]=(0,n.useState)(null),[q,W]=(0,n.useState)(""),[z,B]=(0,n.useState)({title:"Test Notification",message:"This is a test notification from Dove Text.",priority:"MEDIUM"}),[_,Z]=(0,n.useState)(null),[K,H]=(0,n.useState)(!1),[Q,G]=(0,n.useState)(null),[X,J]=(0,n.useState)(!1),[Y,$]=(0,n.useState)(null);(0,n.useEffect)(()=>{ee()},[]);let ee=async()=>{try{j(!0),w(null);let e=await c.getAllMethods();l(e),e.length>0&&W(e[0].id)}catch(e){w("Failed to load delivery methods. Please try again."),console.error(e)}finally{j(!1)}},et=e=>{let{name:t,value:a}=e.target;B(e=>({...e,[t]:a}))},ea=async e=>{e.preventDefault();try{j(!0),w(null),T(null);let e=await c.testDelivery({methodId:q?Number(q):void 0,...z});T(e)}catch(e){w("Failed to send test notification. Please try again."),console.error(e)}finally{j(!1)}},er=async e=>{if(_){H(!0);try{await c.createMethod(_,e),ee(),E(!1),Z(null)}catch(e){console.error("Error creating delivery method:",e),G("Failed to create delivery method. Please try again.")}finally{H(!1)}}},en=async e=>{if(L){J(!0);try{await c.updateMethod(L.id,L.type,e),ee(),S(!1),U(null)}catch(e){console.error("Error updating delivery method:",e),$("Failed to update delivery method. Please try again.")}finally{J(!1)}}},es=e=>{V(e),W(e.id),T(null),D(!0)},el=()=>{(!O||I)&&(D(!1),V(null),T(null))},ei=e=>{U(e),S(!0)},eo=e=>{V(e),P(!0)},ec=async e=>{try{j(!0),w(null),await c.setDefaultMethod(e.id),await ee()}catch(e){w("Failed to set delivery method as default. Please try again."),console.error(e)}finally{j(!1)}};return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:(0,r.jsxs)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[(0,r.jsx)("li",{className:"inline-flex items-center",children:(0,r.jsxs)(u.default,{href:"/admin-tools",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Admin Tools"]})}),(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4 text-gray-400"}),(0,r.jsx)(u.default,{href:"/admin-tools/test",className:"ml-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ml-2",children:"Test Tools"})]})}),(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4 text-gray-400"}),(0,r.jsx)("span",{className:"ml-1 text-sm font-medium text-gray-500 md:ml-2",children:"Notification Delivery"})]})})]})}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Notification Delivery Test"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)(g.v,{as:"div",className:"relative inline-block text-left",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(g.v.Button,{className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:["Create Method",(0,r.jsx)(x.Z,{className:"-mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"})]})}),(0,r.jsx)(b.u,{as:n.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,r.jsx)(g.v.Items,{className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,r.jsx)("div",{className:"py-1",children:Object.values(i).map(e=>(0,r.jsx)(g.v.Item,{children:t=>{let{active:a}=t;return(0,r.jsxs)("button",{onClick:()=>{Z(e.id),E(!0)},className:"".concat(a?"bg-gray-100 text-gray-900":"text-gray-700"," flex w-full items-center px-4 py-2 text-sm"),children:[(0,r.jsxs)("span",{className:"mr-2",children:["mail"===e.icon&&"✉️","chat"===e.icon&&"\uD83D\uDCAC","phone"===e.icon&&"TEXT"===e.id&&"\uD83D\uDCF1","phone"===e.icon&&"VOICE"===e.id&&"\uD83D\uDCDE","code"===e.icon&&"\uD83D\uDD17"]}),e.label]})}},e.id))})})})]}),(0,r.jsx)("button",{onClick:ee,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",disabled:o,children:o?"Loading...":"Refresh"})]})]}),N&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:N}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Delivery Methods"}),o?(0,r.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):0===a.length?(0,r.jsx)("div",{className:"text-center text-gray-500 py-8",children:'No delivery methods found. Create one using the "Create Method" button above.'}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Default"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.id}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.type}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.description}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.isDefault?(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Default"}):"No"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)("button",{onClick:()=>es(e),className:"text-blue-600 hover:text-blue-900 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded",title:"Test this delivery method",children:"Test"}),(0,r.jsx)("button",{onClick:()=>ei(e),className:"text-green-600 hover:text-green-900 bg-green-100 hover:bg-green-200 px-3 py-1 rounded",title:"Edit this delivery method",children:(0,r.jsx)(h.Z,{className:"h-4 w-4"})}),!e.isDefault&&(0,r.jsx)("button",{onClick:()=>eo(e),className:"text-red-600 hover:text-red-900 bg-red-100 hover:bg-red-200 px-3 py-1 rounded",title:"Delete this delivery method",children:(0,r.jsx)(f.Z,{className:"h-4 w-4"})}),!e.isDefault&&(0,r.jsx)("button",{onClick:()=>ec(e),className:"text-purple-600 hover:text-purple-900 bg-purple-100 hover:bg-purple-200 px-3 py-1 rounded",title:"Set as default delivery method",children:"Default"})]})})]},e.id))})]})})]}),(0,r.jsx)(b.u,{appear:!0,show:k,as:n.Fragment,children:(0,r.jsxs)(v.V,{as:"div",className:"relative z-10",onClose:()=>!O&&el(),children:[(0,r.jsx)(b.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,r.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,r.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,r.jsx)(b.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,r.jsxs)(v.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,r.jsxs)(v.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 flex justify-between items-center",children:["Test ",null==F?void 0:F.name,!O&&I&&(0,r.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent p-1 text-sm font-medium text-gray-400 hover:text-gray-500 focus:outline-none",onClick:el,children:(0,r.jsx)(y.Z,{className:"h-5 w-5"})})]}),I&&(0,r.jsx)("div",{className:"mt-4 p-4 rounded ".concat(I.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:I.success?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-green-800",children:"Notification sent successfully!"}),(0,r.jsxs)("p",{className:"text-sm text-green-700 mt-1",children:["Notification ID: ",I.notificationId]}),I.deliveryId&&(0,r.jsxs)("p",{className:"text-sm text-green-700",children:["Delivery ID: ",I.deliveryId]}),I.metadata&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Metadata:"}),(0,r.jsx)("pre",{className:"text-xs bg-white p-2 rounded mt-1 overflow-x-auto",children:JSON.stringify(I.metadata,null,2)})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-red-800",children:"Failed to send notification"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:I.error||I.message})]})}),!I&&(0,r.jsxs)("form",{onSubmit:ea,className:"mt-4",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"modal-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,r.jsx)("input",{type:"text",id:"modal-title",name:"title",value:z.title,onChange:et,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"modal-message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,r.jsx)("textarea",{id:"modal-message",name:"message",value:z.message,onChange:et,className:"w-full border border-gray-300 rounded px-3 py-2 h-24 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"modal-priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,r.jsxs)("select",{id:"modal-priority",name:"priority",value:z.priority,onChange:et,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"LOW",children:"Low"}),(0,r.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,r.jsx)("option",{value:"HIGH",children:"High"}),(0,r.jsx)("option",{value:"URGENT",children:"Urgent"})]})]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:O,children:O?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Testing..."]}):"Send Test Notification"})})]}),I&&(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:el,children:"Close"})})]})})})})]})}),C&&_&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,r.jsxs)("span",{className:"mr-2 text-xl",children:["mail"===i[_].icon&&"✉️","chat"===i[_].icon&&"\uD83D\uDCAC","phone"===i[_].icon&&"TEXT"===_&&"\uD83D\uDCF1","phone"===i[_].icon&&"VOICE"===_&&"\uD83D\uDCDE","code"===i[_].icon&&"\uD83D\uDD17"]}),"Create ",null===(e=i[_])||void 0===e?void 0:e.label," Delivery Method"]}),(0,r.jsx)("button",{onClick:()=>{E(!1),Z(null),G("")},className:"text-gray-400 hover:text-gray-500",children:(0,r.jsx)(y.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"p-6",children:[Q&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md",children:Q}),(0,r.jsx)(d,{type:_,onSubmit:er,onCancel:()=>{E(!1),Z(null)},isSubmitting:K})]})]})}),R&&L&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,r.jsxs)("span",{className:"mr-2 text-xl",children:["EMAIL"===L.type&&"✉️","SLACK"===L.type&&"\uD83D\uDCAC","TEXT"===L.type&&"\uD83D\uDCF1","VOICE"===L.type&&"\uD83D\uDCDE","WEBHOOK"===L.type&&"\uD83D\uDD17"]}),"Edit ",L.name]}),(0,r.jsx)("button",{onClick:()=>{S(!1),U(null)},className:"text-gray-400 hover:text-gray-500",children:(0,r.jsx)(y.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"p-6",children:[Y&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md",children:Y}),(0,r.jsx)(d,{type:L.type,initialValues:{name:L.name,...L.config?JSON.parse(L.config):{}},onSubmit:en,onCancel:()=>S(!1),isSubmitting:X})]})]})})]})}},6564:function(e,t,a){"use strict";a.d(t,{x:function(){return s}});var r=a(3107),n=a(9359);let s=r.Z.create({baseURL:"https://api.dovetext.com",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(async e=>{console.log("[API Client] Request interceptor called for:",e.url);try{let t=n.auth.currentUser;if(!t)return console.error("[API Client] Not authenticated, rejecting request"),Promise.reject(Error("Not authenticated"));let a=await t.getIdToken();console.log("[API Client] Successfully obtained token for request"),e.headers.Authorization="Bearer ".concat(a),console.log("[API Client] Request headers set:",{contentType:e.headers["Content-Type"],hasAuth:!!e.headers.Authorization,method:e.method,url:e.url})}catch(e){return console.error("[API Client] Error getting Firebase token:",e),Promise.reject(e)}return e},e=>(console.error("[API Client] Request interceptor error:",e),Promise.reject(e))),s.interceptors.response.use(e=>(console.log("[API Client] Response received:",{status:e.status,url:e.config.url,data:e.data}),e),e=>{var t,a,r;if(console.error("[API Client] Response error:",{url:null===(t=e.config)||void 0===t?void 0:t.url,status:null===(a=e.response)||void 0===a?void 0:a.status,statusText:null===(r=e.response)||void 0===r?void 0:r.statusText,message:e.message}),e.response)switch(e.response.status){case 401:window.location.pathname.includes("/signin")||(window.location.href="/signin");break;case 403:console.error("Access forbidden");break;case 404:console.error("Resource not found");break;default:console.error("API error:",e.response.data)}return Promise.reject(e)})},2708:function(e,t,a){"use strict";a.d(t,{v:function(){return V}});var r,n,s,l=a(4090),i=a(44),o=a(641),c=a(2381),d=a(9790),u=a(1679),m=a(7130),p=a(1454),x=a(6601),h=a(2165),f=a(6887),y=a(1772),g=a(8358),b=a(4152),v=a(2554),j=a(5205),N=a(8803),w=a(2640),I=a(8318),T=a(7409),k=((r=k||{})[r.Open=0]="Open",r[r.Closed=1]="Closed",r),D=((n=D||{})[n.Pointer=0]="Pointer",n[n.Other=1]="Other",n),C=((s=C||{})[s.OpenMenu=0]="OpenMenu",s[s.CloseMenu=1]="CloseMenu",s[s.GoToItem=2]="GoToItem",s[s.Search=3]="Search",s[s.ClearSearch=4]="ClearSearch",s[s.RegisterItem=5]="RegisterItem",s[s.UnregisterItem=6]="UnregisterItem",s);function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,a=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,r=(0,N.z2)(t(e.items.slice()),e=>e.dataRef.current.domRef.current),n=a?r.indexOf(a):null;return -1===n&&(n=null),{items:r,activeItemIndex:n}}let R={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,__demoMode:!1,menuState:0},2:(e,t)=>{var a;let r=E(e),n=(0,v.d)(t,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeItemIndex:n,activationTrigger:null!=(a=t.trigger)?a:1}},3:(e,t)=>{let a=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),n=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+a).concat(e.items.slice(0,e.activeItemIndex+a)):e.items).find(e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))&&!e.dataRef.current.disabled}),s=n?e.items.indexOf(n):-1;return -1===s||s===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:s,activationTrigger:1}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{let a=E(e,e=>[...e,{id:t.id,dataRef:t.dataRef}]);return{...e,...a}},6:(e,t)=>{let a=E(e,e=>{let a=e.findIndex(e=>e.id===t.id);return -1!==a&&e.splice(a,1),e});return{...e,...a,activationTrigger:1}}},S=(0,l.createContext)(null);function M(e){let t=(0,l.useContext)(S);if(null===t){let t=Error("<".concat(e," /> is missing a parent <Menu /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,M),t}return t}function P(e,t){return(0,w.E)(t.type,R,e,t)}S.displayName="MenuContext";let O=l.Fragment,A=I.AN.RenderStrategy|I.AN.Static,F=l.Fragment,V=Object.assign((0,I.yV)(function(e,t){let{__demoMode:a=!1,...r}=e,n=(0,l.useReducer)(P,{__demoMode:a,menuState:a?0:1,buttonRef:(0,l.createRef)(),itemsRef:(0,l.createRef)(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsRef:i,buttonRef:c},d]=n,m=(0,x.T)(t);(0,u.O)([c,i],(e,t)=>{var a;d({type:1}),(0,N.sP)(t,N.tJ.Loose)||(e.preventDefault(),null==(a=c.current)||a.focus())},0===s);let p=(0,o.z)(()=>{d({type:1})}),h=(0,l.useMemo)(()=>({open:0===s,close:p}),[s,p]);return l.createElement(S.Provider,{value:n},l.createElement(g.up,{value:(0,w.E)(s,{0:g.ZM.Open,1:g.ZM.Closed})},(0,I.sY)({ourProps:{ref:m},theirProps:r,slot:h,defaultTag:O,name:"Menu"})))}),{Button:(0,I.yV)(function(e,t){var a;let r=(0,c.M)(),{id:n="headlessui-menu-button-".concat(r),...s}=e,[d,u]=M("Menu.Button"),m=(0,x.T)(d.buttonRef,t),h=(0,i.G)(),f=(0,o.z)(e=>{switch(e.key){case T.R.Space:case T.R.Enter:case T.R.ArrowDown:e.preventDefault(),e.stopPropagation(),u({type:0}),h.nextFrame(()=>u({type:2,focus:v.T.First}));break;case T.R.ArrowUp:e.preventDefault(),e.stopPropagation(),u({type:0}),h.nextFrame(()=>u({type:2,focus:v.T.Last}))}}),y=(0,o.z)(e=>{e.key===T.R.Space&&e.preventDefault()}),g=(0,o.z)(t=>{if((0,b.P)(t.currentTarget))return t.preventDefault();e.disabled||(0===d.menuState?(u({type:1}),h.nextFrame(()=>{var e;return null==(e=d.buttonRef.current)?void 0:e.focus({preventScroll:!0})})):(t.preventDefault(),u({type:0})))}),j=(0,l.useMemo)(()=>({open:0===d.menuState}),[d]),N={ref:m,id:n,type:(0,p.f)(e,d.buttonRef),"aria-haspopup":"menu","aria-controls":null==(a=d.itemsRef.current)?void 0:a.id,"aria-expanded":0===d.menuState,onKeyDown:f,onKeyUp:y,onClick:g};return(0,I.sY)({ourProps:N,theirProps:s,slot:j,defaultTag:"button",name:"Menu.Button"})}),Items:(0,I.yV)(function(e,t){var a,r;let n=(0,c.M)(),{id:s="headlessui-menu-items-".concat(n),...d}=e,[u,p]=M("Menu.Items"),h=(0,x.T)(u.itemsRef,t),f=(0,m.i)(u.itemsRef),b=(0,i.G)(),w=(0,g.oJ)(),k=null!==w?(w&g.ZM.Open)===g.ZM.Open:0===u.menuState;(0,l.useEffect)(()=>{let e=u.itemsRef.current;e&&0===u.menuState&&e!==(null==f?void 0:f.activeElement)&&e.focus({preventScroll:!0})},[u.menuState,u.itemsRef,f]),(0,y.B)({container:u.itemsRef.current,enabled:0===u.menuState,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let D=(0,o.z)(e=>{var t,a;switch(b.dispose(),e.key){case T.R.Space:if(""!==u.searchQuery)return e.preventDefault(),e.stopPropagation(),p({type:3,value:e.key});case T.R.Enter:if(e.preventDefault(),e.stopPropagation(),p({type:1}),null!==u.activeItemIndex){let{dataRef:e}=u.items[u.activeItemIndex];null==(a=null==(t=e.current)?void 0:t.domRef.current)||a.click()}(0,N.wI)(u.buttonRef.current);break;case T.R.ArrowDown:return e.preventDefault(),e.stopPropagation(),p({type:2,focus:v.T.Next});case T.R.ArrowUp:return e.preventDefault(),e.stopPropagation(),p({type:2,focus:v.T.Previous});case T.R.Home:case T.R.PageUp:return e.preventDefault(),e.stopPropagation(),p({type:2,focus:v.T.First});case T.R.End:case T.R.PageDown:return e.preventDefault(),e.stopPropagation(),p({type:2,focus:v.T.Last});case T.R.Escape:e.preventDefault(),e.stopPropagation(),p({type:1}),(0,j.k)().nextFrame(()=>{var e;return null==(e=u.buttonRef.current)?void 0:e.focus({preventScroll:!0})});break;case T.R.Tab:e.preventDefault(),e.stopPropagation(),p({type:1}),(0,j.k)().nextFrame(()=>{(0,N.EO)(u.buttonRef.current,e.shiftKey?N.TO.Previous:N.TO.Next)});break;default:1===e.key.length&&(p({type:3,value:e.key}),b.setTimeout(()=>p({type:4}),350))}}),C=(0,o.z)(e=>{e.key===T.R.Space&&e.preventDefault()}),E=(0,l.useMemo)(()=>({open:0===u.menuState}),[u]),R={"aria-activedescendant":null===u.activeItemIndex||null==(a=u.items[u.activeItemIndex])?void 0:a.id,"aria-labelledby":null==(r=u.buttonRef.current)?void 0:r.id,id:s,onKeyDown:D,onKeyUp:C,role:"menu",tabIndex:0,ref:h};return(0,I.sY)({ourProps:R,theirProps:d,slot:E,defaultTag:"div",features:A,visible:k,name:"Menu.Items"})}),Item:(0,I.yV)(function(e,t){let a=(0,c.M)(),{id:r="headlessui-menu-item-".concat(a),disabled:n=!1,...s}=e,[i,u]=M("Menu.Item"),m=null!==i.activeItemIndex&&i.items[i.activeItemIndex].id===r,p=(0,l.useRef)(null),y=(0,x.T)(t,p);(0,d.e)(()=>{if(i.__demoMode||0!==i.menuState||!m||0===i.activationTrigger)return;let e=(0,j.k)();return e.requestAnimationFrame(()=>{var e,t;null==(t=null==(e=p.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})}),e.dispose},[i.__demoMode,p,m,i.menuState,i.activationTrigger,i.activeItemIndex]);let g=(0,h.x)(p),b=(0,l.useRef)({disabled:n,domRef:p,get textValue(){return g()}});(0,d.e)(()=>{b.current.disabled=n},[b,n]),(0,d.e)(()=>(u({type:5,id:r,dataRef:b}),()=>u({type:6,id:r})),[b,r]);let w=(0,o.z)(()=>{u({type:1})}),T=(0,o.z)(e=>{if(n)return e.preventDefault();u({type:1}),(0,N.wI)(i.buttonRef.current)}),k=(0,o.z)(()=>{if(n)return u({type:2,focus:v.T.Nothing});u({type:2,focus:v.T.Specific,id:r})}),D=(0,f.g)(),C=(0,o.z)(e=>D.update(e)),E=(0,o.z)(e=>{D.wasMoved(e)&&(n||m||u({type:2,focus:v.T.Specific,id:r,trigger:0}))}),R=(0,o.z)(e=>{D.wasMoved(e)&&(n||m&&u({type:2,focus:v.T.Nothing}))}),S=(0,l.useMemo)(()=>({active:m,disabled:n,close:w}),[m,n,w]);return(0,I.sY)({ourProps:{id:r,ref:y,role:"menuitem",tabIndex:!0===n?void 0:-1,"aria-disabled":!0===n||void 0,disabled:void 0,onClick:T,onFocus:k,onPointerEnter:C,onMouseEnter:C,onPointerMove:E,onMouseMove:E,onPointerLeave:R,onMouseLeave:R},theirProps:s,slot:S,defaultTag:F,name:"Menu.Item"})})})},1772:function(e,t,a){"use strict";a.d(t,{B:function(){return l}});var r=a(4090),n=a(4819),s=a(9790);function l(e){let{container:t,accept:a,walk:l,enabled:i=!0}=e,o=(0,r.useRef)(a),c=(0,r.useRef)(l);(0,r.useEffect)(()=>{o.current=a,c.current=l},[a,l]),(0,s.e)(()=>{if(!t||!i)return;let e=(0,n.r)(t);if(!e)return;let a=o.current,r=c.current,s=Object.assign(e=>a(e),{acceptNode:a}),l=e.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,s,!1);for(;l.nextNode();)r(l.currentNode)},[t,i,o,c])}},8005:function(e,t,a){"use strict";var r=a(4090);let n=r.forwardRef(function(e,t){let{title:a,titleId:n,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),a?r.createElement("title",{id:n},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))});t.Z=n},9643:function(e,t,a){"use strict";var r=a(4090);let n=r.forwardRef(function(e,t){let{title:a,titleId:n,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),a?r.createElement("title",{id:n},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});t.Z=n},3536:function(e,t,a){"use strict";var r=a(4090);let n=r.forwardRef(function(e,t){let{title:a,titleId:n,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),a?r.createElement("title",{id:n},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))});t.Z=n}},function(e){e.O(0,[9321,8593,8792,3107,542,9509,9359,2971,8069,1744],function(){return e(e.s=661)}),_N_E=e.O()}]);