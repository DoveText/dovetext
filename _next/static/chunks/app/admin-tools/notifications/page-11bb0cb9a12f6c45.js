(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9404],{5623:function(e,t,a){Promise.resolve().then(a.bind(a,6837))},7387:function(e,t,a){"use strict";a.d(t,{z:function(){return n}});let s=[{id:1,name:"Welcome Email",type:"email",subject:"Welcome to Dove Text!",content:"Hi {{name}},\n\nWelcome to Dove Text! We're excited to have you on board.\n\nBest regards,\nThe Dove Text Team",variables:["name"],createdAt:"2023-01-01T00:00:00Z",updatedAt:"2023-01-01T00:00:00Z",isDefault:!0},{id:2,name:"Password Reset",type:"email",subject:"Password Reset Request",content:"Hi {{name}},\n\nYou requested a password reset. Click the link below to reset your password:\n\n{{resetLink}}\n\nIf you didn't request this, please ignore this email.\n\nBest regards,\nThe Dove Text Team",variables:["name","resetLink"],createdAt:"2023-01-02T00:00:00Z",updatedAt:"2023-01-02T00:00:00Z",isDefault:!1},{id:3,name:"Account Verification SMS",type:"sms",content:"Your Dove Text verification code is: {{code}}. Valid for 10 minutes.",variables:["code"],createdAt:"2023-01-03T00:00:00Z",updatedAt:"2023-01-03T00:00:00Z",isDefault:!0},{id:4,name:"Appointment Reminder",type:"voice",content:"Hello {{name}}. This is a reminder about your appointment scheduled for {{time}} on {{date}}. Please press 1 to confirm or 2 to reschedule.",variables:["name","time","date"],createdAt:"2023-01-04T00:00:00Z",updatedAt:"2023-01-04T00:00:00Z",isDefault:!0},{id:5,name:"Event Notification",type:"webhook",content:'{\n  "event": "{{eventType}}",\n  "userId": "{{userId}}",\n  "timestamp": "{{timestamp}}",\n  "data": {\n    "message": "{{message}}"\n  }\n}',variables:["eventType","userId","timestamp","message"],createdAt:"2023-01-05T00:00:00Z",updatedAt:"2023-01-05T00:00:00Z",isDefault:!0},{id:6,name:"Slack Notification",type:"plugin",content:'{\n  "blocks": [\n    {\n      "type": "section",\n      "text": {\n        "type": "mrkdwn",\n        "text": "*{{title}}*\\n{{message}}"\n      }\n    }\n  ]\n}',variables:["title","message"],createdAt:"2023-01-06T00:00:00Z",updatedAt:"2023-01-06T00:00:00Z",isDefault:!0}],n={getAllTemplates:async()=>new Promise(e=>{setTimeout(()=>{e([...s])},500)}),getTemplatesByType:async e=>new Promise(t=>{setTimeout(()=>{t(s.filter(t=>t.type===e))},500)}),getTemplateById:async e=>new Promise((t,a)=>{setTimeout(()=>{let n=s.find(t=>t.id===e);n?t({...n}):a(Error("Template not found"))},500)}),createTemplate:async e=>new Promise(t=>{setTimeout(()=>{let a={id:Math.max(...s.map(e=>e.id))+1,name:e.name,type:e.type,subject:e.subject,content:e.content,variables:i(e.content),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!1};s.push(a),t({...a})},500)}),updateTemplate:async e=>new Promise((t,a)=>{setTimeout(()=>{let n=s.findIndex(t=>t.id===e.id);if(-1!==n){let a={...s[n],...e,updatedAt:new Date().toISOString()};e.content&&(a.variables=i(e.content)),s[n]=a,t({...a})}else a(Error("Template not found"))},500)}),deleteTemplate:async e=>new Promise((t,a)=>{setTimeout(()=>{let n=s.findIndex(t=>t.id===e);-1!==n?(s.splice(n,1),t()):a(Error("Template not found"))},500)}),setDefaultTemplate:async e=>new Promise((t,a)=>{setTimeout(()=>{let n=s.find(t=>t.id===e);if(!n){a(Error("Template not found"));return}s.forEach(e=>{e.type===n.type&&(e.isDefault=!1)}),n.isDefault=!0,t({...n})},500)}),testTemplate:async(e,t)=>new Promise((a,n)=>{setTimeout(()=>{let i=s.find(t=>t.id===e);if(!i){n(Error("Template not found"));return}let l=i.content;Object.keys(t).forEach(e=>{let a=RegExp("{{".concat(e,"}}"),"g");l=l.replace(a,t[e])}),a(l)},500)})};function i(e){let t;let a=/{{([^}]+)}}/g,s=[];for(;null!==(t=a.exec(e));)s.includes(t[1])||s.push(t[1]);return s}},6837:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var s=a(3827),n=a(4090),i=a(8792),l=a(9359),r=a(3536),c=a(9643),o=a(1310),d=a(3835),m=a(5548),x=a(4424),u=a(991),p=a(7387);function f(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}function h(){let{user:e}=(0,l.useAuth)(),[t,a]=(0,n.useState)([]),[h,y]=(0,n.useState)(!0),[g,b]=(0,n.useState)(null),w={all:{name:"All Templates"},email:{name:"Email"},sms:{name:"SMS"},voice:{name:"Voice"},webhook:{name:"Webhook"},plugin:{name:"Plugin"}};(0,n.useEffect)(()=>{j()},[]);let j=async()=>{try{y(!0),b(null);let e=await p.z.getAllTemplates();a(e)}catch(e){b("Failed to load notification templates. Please try again."),console.error(e)}finally{y(!1)}},N=async e=>{try{y(!0),await p.z.setDefaultTemplate(e.id),await j()}catch(e){b("Failed to set template as default. Please try again."),console.error(e)}finally{y(!1)}},v=async e=>{if(confirm('Are you sure you want to delete the template "'.concat(e.name,'"?')))try{y(!0),await p.z.deleteTemplate(e.id),await j()}catch(e){b("Failed to delete template. Please try again."),console.error(e)}finally{y(!1)}},T=e=>"all"===e?t:t.filter(t=>t.type===e);return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:(0,s.jsxs)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[(0,s.jsx)("li",{className:"inline-flex items-center",children:(0,s.jsxs)(i.default,{href:"/admin-tools",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600",children:[(0,s.jsx)(r.Z,{className:"w-4 h-4 mr-2"}),"Admin Tools"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("span",{className:"ml-1 text-sm font-medium text-gray-500 md:ml-2",children:"Notification Templates"})]})})]})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Notification Templates"}),(0,s.jsxs)(i.default,{href:"/admin-tools/notifications/create",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,s.jsx)(o.Z,{className:"h-5 w-5 mr-2"}),"Create Template"]})]}),g&&(0,s.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm text-red-700",children:g})})]})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)(u.O.Group,{children:[(0,s.jsx)(u.O.List,{className:"flex space-x-1 rounded-xl bg-blue-900/20 p-1",children:Object.entries(w).map(e=>{let[t,{name:a}]=e;return(0,s.jsx)(u.O,{className:e=>{let{selected:t}=e;return f("w-full rounded-lg py-2.5 text-sm font-medium leading-5","ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",t?"bg-white shadow text-blue-700":"text-blue-100 hover:bg-white/[0.12] hover:text-white")},children:a},t)})}),(0,s.jsx)(u.O.Panels,{className:"mt-2",children:Object.keys(w).map(e=>(0,s.jsx)(u.O.Panel,{className:f("rounded-xl bg-white p-3","ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2"),children:h?(0,s.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):0===T(e).length?(0,s.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No templates found in this category."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variables"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Default"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:T(e).map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("email"===e.type?"bg-blue-100 text-blue-800":"sms"===e.type?"bg-green-100 text-green-800":"voice"===e.type?"bg-purple-100 text-purple-800":"webhook"===e.type?"bg-yellow-100 text-yellow-800":"bg-pink-100 text-pink-800"),children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.variables.map((e,t)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 mr-1",children:e},e))})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.updatedAt).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isDefault?(0,s.jsx)(d.Z,{className:"h-5 w-5 text-green-500"}):(0,s.jsx)("button",{onClick:()=>N(e),className:"text-xs text-blue-600 hover:text-blue-900",children:"Set as default"})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,s.jsx)(i.default,{href:"/admin-tools/notifications/edit?id=".concat(e.id),className:"text-blue-600 hover:text-blue-900 mr-4",children:(0,s.jsx)(m.Z,{className:"h-5 w-5 inline"})}),(0,s.jsx)("button",{onClick:()=>v(e),className:"text-red-600 hover:text-red-900",children:(0,s.jsx)(x.Z,{className:"h-5 w-5 inline"})})]})]},e.id))})]})})},e))})]})})]})}}},function(e){e.O(0,[9321,8593,8792,9339,9359,2971,8069,1744],function(){return e(e.s=5623)}),_N_E=e.O()}]);