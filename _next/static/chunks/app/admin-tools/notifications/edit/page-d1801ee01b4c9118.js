(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9372],{622:function(e,t,l){Promise.resolve().then(l.bind(l,7200))},7200:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return o}});var a=l(3827),s=l(4090),i=l(7907),n=l(8792),r=l(3536),d=l(9643),c=l(9304),m=l(7387);function o(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),l=(null==t?void 0:t.get("id"))||"",[o,x]=(0,s.useState)(null),[u,h]=(0,s.useState)(!1),[f,p]=(0,s.useState)(!0),[N,j]=(0,s.useState)(null);(0,s.useEffect)(()=>{l?v():(j("No template ID provided"),p(!1))},[l]);let v=async()=>{try{if(p(!0),j(null),!l){j("Invalid template ID");return}let e=parseInt(l);if(isNaN(e)){j("Invalid template ID");return}let t=await m.z.getTemplateById(e);x(t)}catch(e){console.error("Error fetching template:",e),j("Failed to load template. Please try again.")}finally{p(!1)}},b=async t=>{try{if(h(!0),j(null),!l){j("Invalid template ID");return}let a=parseInt(l);if(isNaN(a)){j("Invalid template ID");return}await m.z.updateTemplate({...t,id:a}),e.push("/admin-tools/notifications")}catch(e){console.error("Error updating template:",e),j("Failed to update template. Please try again.")}finally{h(!1)}};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:(0,a.jsxs)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[(0,a.jsx)("li",{className:"inline-flex items-center",children:(0,a.jsxs)(n.default,{href:"/admin-tools",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600",children:[(0,a.jsx)(r.Z,{className:"w-4 h-4 mr-2"}),"Admin Tools"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)(n.default,{href:"/admin-tools/notifications",className:"ml-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ml-2",children:"Notification Templates"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"ml-1 text-sm font-medium text-gray-500 md:ml-2",children:"Edit Template"})]})})]})}),(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:f?"Loading Template...":"Edit Template: ".concat(null==o?void 0:o.name)})}),N&&(0,a.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:N})})]})}),f?(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6 flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):o?(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,a.jsx)(c.Z,{template:o,onSubmit:b,onCancel:()=>{e.push("/admin-tools/notifications")},isSubmitting:u})}):(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Template not found."}),(0,a.jsx)(n.default,{href:"/admin-tools/notifications",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Back to Templates"})]})]})}}},function(e){e.O(0,[8792,7521,2971,8069,1744],function(){return e(e.s=622)}),_N_E=e.O()}]);