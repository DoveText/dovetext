(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{4579:function(e,t,r){Promise.resolve().then(r.bind(r,4274)),Promise.resolve().then(r.bind(r,1255)),Promise.resolve().then(r.t.bind(r,5250,23)),Promise.resolve().then(r.t.bind(r,3385,23)),Promise.resolve().then(r.t.bind(r,9646,23)),Promise.resolve().then(r.bind(r,5350)),Promise.resolve().then(r.bind(r,3170)),Promise.resolve().then(r.bind(r,7100)),Promise.resolve().then(r.bind(r,9359)),Promise.resolve().then(r.bind(r,4081))},6564:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var s=r(3107),n=r(9359);let a=s.Z.create({baseURL:"https://api.dovetext.com",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(async e=>{console.log("[API Client] Request interceptor called for:",e.url);try{let t=n.auth.currentUser;if(!t)return console.error("[API Client] Not authenticated, rejecting request"),Promise.reject(Error("Not authenticated"));let r=await t.getIdToken();console.log("[API Client] Successfully obtained token for request"),e.headers.Authorization="Bearer ".concat(r),console.log("[API Client] Request headers set:",{contentType:e.headers["Content-Type"],hasAuth:!!e.headers.Authorization,method:e.method,url:e.url})}catch(e){return console.error("[API Client] Error getting Firebase token:",e),Promise.reject(e)}return e},e=>(console.error("[API Client] Request interceptor error:",e),Promise.reject(e))),a.interceptors.response.use(e=>(console.log("[API Client] Response received:",{status:e.status,url:e.config.url,data:e.data}),e),e=>{var t,r,s;if(console.error("[API Client] Response error:",{url:null===(t=e.config)||void 0===t?void 0:t.url,status:null===(r=e.response)||void 0===r?void 0:r.status,statusText:null===(s=e.response)||void 0===s?void 0:s.statusText,message:e.message}),e.response)switch(e.response.status){case 401:window.location.pathname.includes("/signin")||(window.location.href="/signin");break;case 403:console.error("Access forbidden");break;case 404:console.error("Resource not found");break;default:console.error("API error:",e.response.data)}return Promise.reject(e)})},3170:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var s=r(3827),n=r(8792),a=r(7907),o=r(703),i=r(4090),l=r(2708),c=r(129),d=r(3536),u=r(1039),m=r(461),h=r(1640),x=r(8005),f=r(9359);function g(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function v(){var e;let{user:t,logout:r}=(0,f.useAuth)(),v=(0,a.useRouter)(),p=(e,t,r)=>{if(t.preventDefault(),window.location.pathname===e){r&&r();return}document.dispatchEvent(new CustomEvent("routeChangeStart")),r&&r(),setTimeout(()=>{v.push(e)},50)},y=async()=>{try{await r()}catch(e){console.error("Error signing out:",e)}finally{window.location.href="/"}};return(0,s.jsx)("nav",{className:"bg-white shadow-sm relative z-40",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsxs)(n.default,{href:t?"/dashboard":"/",className:"flex items-center",children:[(0,s.jsx)(o.default,{src:"/logo.svg",alt:"DoveText Logo",width:32,height:32,className:"h-8 w-auto"}),(0,s.jsx)("span",{className:"ml-2 text-xl font-semibold text-gray-900",children:"DoveText"})]})}),t&&(0,s.jsxs)("div",{className:"hidden md:flex items-center ml-10 space-x-10",children:[(0,s.jsxs)(n.default,{href:"/dashboard",onClick:e=>p("/dashboard",e),className:"text-sm font-medium text-gray-900 hover:text-gray-700 flex items-center px-3 py-2 rounded-md hover:bg-gray-50",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),(0,s.jsxs)(n.default,{href:"/schedule",onClick:e=>p("/schedule",e),className:"text-sm font-medium text-gray-900 hover:text-gray-700 flex items-center px-3 py-2 rounded-md hover:bg-gray-50",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"My Schedule"]}),(0,s.jsxs)(n.default,{href:"/tasks",onClick:e=>p("/tasks",e),className:"text-sm font-medium text-gray-900 hover:text-gray-700 flex items-center px-3 py-2 rounded-md hover:bg-gray-50",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"AI Automations"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[!t&&(0,s.jsx)(n.default,{href:"/pricing",className:"text-sm font-medium text-gray-900 hover:text-gray-700",children:"Pricing"}),t?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(l.v,{as:"div",className:"relative z-50",children:[(0,s.jsx)(l.v.Button,{className:"flex items-center text-gray-700 hover:text-gray-900",children:(0,s.jsx)(h.Z,{className:"h-6 w-6","aria-hidden":"true"})}),(0,s.jsx)(c.u,{as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,s.jsx)(l.v.Items,{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsx)(l.v.Item,{children:e=>{let{active:t,close:r}=e;return(0,s.jsx)(n.default,{href:"/notifications/delivery-methods",onClick:e=>p("/notifications/delivery-methods",e,r),className:g(t?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:"Delivery Methods"})}}),(0,s.jsx)(l.v.Item,{children:e=>{let{active:t,close:r}=e;return(0,s.jsx)(n.default,{href:"/notifications/delivery-channels",onClick:e=>p("/notifications/delivery-channels",e,r),className:g(t?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:"Delivery Channels"})}}),(0,s.jsx)(l.v.Item,{children:e=>{let{active:t,close:r}=e;return(0,s.jsx)(n.default,{href:"/notifications/escalation-chains",onClick:e=>p("/notifications/escalation-chains",e,r),className:g(t?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:"Escalation Chains"})}}),(0,s.jsx)(l.v.Item,{children:e=>{let{active:t,close:r}=e;return(0,s.jsx)(n.default,{href:"/notifications/delivery-rules",onClick:e=>p("/notifications/delivery-rules",e,r),className:g(t?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:"Delivery Rules"})}})]})})})]}),(0,s.jsxs)(l.v,{as:"div",className:"relative z-50",children:[(0,s.jsxs)(l.v.Button,{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-full overflow-hidden bg-gray-100",children:(0,s.jsx)(o.default,{src:t.photoURL||"/default-avatar.png",alt:"User avatar",width:32,height:32,className:"h-full w-full object-cover",onError:e=>{e.target.src="/default-avatar.png"}})}),(0,s.jsx)(x.Z,{className:"ml-1 h-4 w-4","aria-hidden":"true"})]}),(0,s.jsx)(c.u,{as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,s.jsx)(l.v.Items,{className:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsx)(l.v.Item,{children:e=>{let{active:t,close:r}=e;return(0,s.jsx)(n.default,{href:"/user/profile",onClick:e=>p("/user/profile",e,r),className:g(t?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:"Profile"})}}),(0,s.jsx)(l.v.Item,{children:e=>{let{active:t,close:r}=e;return(0,s.jsx)(n.default,{href:"/user/settings",onClick:e=>p("/user/settings",e,r),className:g(t?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:"Settings"})}}),(null===(e=t.settings)||void 0===e?void 0:e.role)==="admin"&&(0,s.jsx)(l.v.Item,{children:e=>{let{active:t,close:r}=e;return(0,s.jsx)(n.default,{href:"/admin-tools",onClick:e=>p("/admin-tools",e,r),className:g(t?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:"Admin Tools"})}}),(0,s.jsx)(l.v.Item,{children:e=>{let{active:t}=e;return(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),y()},className:g(t?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-gray-700"),children:"Sign out"})}})]})})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.default,{href:"/signin",className:"text-sm font-medium text-gray-900 hover:text-gray-700",children:"Sign in"}),(0,s.jsx)(n.default,{href:"/signup",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Sign up"})]})]})]})})})}},5350:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var s=r(3827),n=r(4090),a=r(7907);function o(){let[e,t]=(0,n.useState)(!1),r=(0,a.usePathname)(),o=(0,a.useSearchParams)();return((0,n.useEffect)(()=>{let s;let n=new URL(r||"/",window.location.origin);null==o||o.forEach((e,t)=>{n.searchParams.append(t,e)});let a=e=>{e!==n.toString()&&t(!0)},i=()=>{t(!1)};window.addEventListener("beforeunload",()=>a("")),document.addEventListener("routeChangeStart",()=>{a("")}),document.addEventListener("routeChangeComplete",()=>{i()});let l=new MutationObserver(e=>{window.location.href!==n.toString()&&i()});return l.observe(document,{subtree:!0,childList:!0}),e&&(clearTimeout(s),s=setTimeout(()=>{t(!1)},3e3)),()=>{window.removeEventListener("beforeunload",()=>a("")),document.removeEventListener("routeChangeStart",()=>a("")),document.removeEventListener("routeChangeComplete",i),l.disconnect(),clearTimeout(s)}},[r,o,e]),e)?(0,s.jsx)("div",{className:"fixed top-0 left-0 w-full z-50",children:(0,s.jsx)("div",{className:"h-1 bg-blue-600 animate-pulse",children:(0,s.jsx)("div",{className:"h-full bg-blue-500 animate-progress"})})}):null}},3385:function(){}},function(e){e.O(0,[9321,8593,8792,3107,542,2202,3789,9359,416,2971,8069,1744],function(){return e(e.s=4579)}),_N_E=e.O()}]);