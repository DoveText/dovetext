(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4966],{2772:function(e,t,a){Promise.resolve().then(a.bind(a,1647))},7907:function(e,t,a){"use strict";var r=a(5313);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},1647:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(3827),s=a(4090),o=a(9359),n=a(8792),l=a(7907),i=a(9358);function c(){let[e,t]=(0,s.useState)(""),[a,c]=(0,s.useState)(""),[u,d]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[x,f]=(0,s.useState)(!1),[g,p]=(0,s.useState)(!1),[b,w]=(0,s.useState)(!1),[y,v]=(0,s.useState)(""),{signUp:j,signInWithGoogle:N,user:P}=(0,o.useAuth)(),S=(0,l.useRouter)();(0,s.useEffect)(()=>{P&&S.push("/dashboard")},[P,S]);let k=()=>a.length<6?(h("Password must be at least 6 characters long"),!1):a===u||(h("Passwords do not match"),!1),C=async(e,t,a,r)=>{try{let s=await fetch("/api/v1/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,firebaseUid:t,password:a,provider:r})}),o=await s.json();if(!s.ok)throw Error(o.error||"Failed to complete signup");return o}catch(e){throw console.error("Error in completeSignup:",e),e}},E=async e=>{if(!e)return!1;try{let t=await fetch("/api/v1/auth/check-email?email=".concat(encodeURIComponent(e))),a=await t.json();if(!t.ok)return v(a.error||"Failed to validate email"),!1;if(a.exists)return v("This email is already registered"),!1;return v(""),!0}catch(e){return console.error("Error validating email:",e),v("Failed to validate email"),!1}},F=async e=>{let t=e.target.value;await E(t)},A=async t=>{if(t.preventDefault(),y){h("Please fix the errors before submitting");return}if(k())try{h(""),f(!0);let t=await j(e,a);if(!t.user)throw Error("Failed to create user account");await C(e,t.user.uid,a,"email"),w(!0)}catch(e){console.error("Sign up error:",e),e instanceof Error?h(e.message):h("Failed to create an account")}finally{f(!1)}},_=async()=>{try{var e;h(""),p(!0);let t=await N().catch(e=>{throw console.error("Google sign-in error:",e),e});if(!(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.email))throw Error("Failed to get email from Google account");await C(t.user.email,t.user.uid,null,"google"),S.push("/dashboard")}catch(e){console.error("Google sign up error:",e),e instanceof Error?h(e.message):h("Failed to sign up with Google")}finally{p(!1)}};return b?(0,r.jsxs)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-4",children:"Verify Your Email"}),(0,r.jsxs)("p",{className:"text-gray-600 text-center",children:["We've sent a verification link to ",e,". Please check your email and verify your account."]})]}):(0,r.jsxs)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Create an Account"}),m&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:(0,r.jsx)("span",{className:"block sm:inline",children:m})}),(0,r.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-bold mb-2",children:"Email Address"}),(0,r.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>{t(e.target.value),v("")},onBlur:F,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ".concat(y?"border-red-300":"border-gray-300"),required:!0}),y&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:y})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",value:a,onChange:e=>c(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,minLength:6}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters long"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-gray-700 text-sm font-bold mb-2",children:"Confirm Password"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",value:u,onChange:e=>d(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,minLength:6})]}),(0,r.jsxs)("button",{type:"submit",className:"w-full flex items-center justify-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ".concat(x||g?"opacity-50 cursor-not-allowed":""),disabled:x||g,children:[x&&(0,r.jsx)(i.$,{}),x?"Creating Account...":"Create Account"]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,r.jsxs)("button",{type:"button",onClick:_,className:"w-full flex items-center justify-center bg-white hover:bg-gray-50 text-gray-700 font-bold py-2 px-4 border border-gray-300 rounded focus:outline-none focus:shadow-outline ".concat(x||g?"opacity-50 cursor-not-allowed":""),disabled:x||g,children:[g&&(0,r.jsx)(i.$,{className:"text-gray-700"}),g?"Creating Account...":"Sign up with Google"]})]}),(0,r.jsxs)("p",{className:"mt-4 text-center text-gray-600 text-sm",children:["Already have an account?"," ",(0,r.jsx)(n.default,{href:"/signin",className:"text-blue-500 hover:text-blue-700",children:"Sign in"})]})]})}},9358:function(e,t,a){"use strict";a.d(t,{$:function(){return s}});var r=a(3827);function s(e){let{className:t=""}=e;return(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 ".concat(t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}}},function(e){e.O(0,[9321,8593,8792,9359,2971,8069,1744],function(){return e(e.s=2772)}),_N_E=e.O()}]);