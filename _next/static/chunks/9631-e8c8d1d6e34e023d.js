"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9631],{4849:function(e,t,n){n.d(t,{q:function(){return s}});var a=n(6564);let s={async getAll(){let{data:e}=await a.x.get("/api/v1/channels");return e},async getById(e){let{data:t}=await a.x.get("/api/v1/channels/".concat(e));return t},async create(e){let{data:t}=await a.x.post("/api/v1/channels",e);return t},async update(e,t){let{data:n}=await a.x.put("/api/v1/channels/".concat(e),t);return n},async delete(e){await a.x.delete("/api/v1/channels/".concat(e))}}},1581:function(e,t,n){n.d(t,{x:function(){return s}});var a=n(6564);let s={async getAll(){let{data:e}=await a.x.get("/api/v1/methods");return e},async getById(e){let{data:t}=await a.x.get("/api/v1/methods/".concat(e));return t},async create(e){let{data:t}=await a.x.post("/api/v1/methods",e);return t},async update(e,t){let{data:n}=await a.x.put("/api/v1/methods/".concat(e),t);return n},async delete(e){await a.x.delete("/api/v1/methods/".concat(e))},async verify(e){await a.x.post("/api/v1/methods/".concat(e,"/verify"))},async setDefault(e){await a.x.post("/api/v1/methods/".concat(e,"/default"))},async getTypes(){let{data:e}=await a.x.get("/api/v1/methods/types");return e}}},7490:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(3827),s=n(6170);function i(e){let{isOpen:t,onClose:n,onConfirm:i,title:l,message:r,confirmText:o="Confirm",cancelText:c="Cancel",confirmButtonClassName:d="bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500",cancelButtonClassName:m="bg-gray-100 text-gray-900 hover:bg-gray-200 focus-visible:ring-gray-500"}=e;return(0,a.jsxs)(s.V,{open:t,onClose:n,children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,a.jsxs)(s.V.Panel,{className:"mx-auto max-w-sm rounded-lg bg-white p-6",children:[(0,a.jsx)(s.V.Title,{className:"text-lg font-medium leading-6 text-gray-900",children:l}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:r})}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,a.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 ".concat(m),onClick:n,children:c}),(0,a.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 ".concat(d),onClick:()=>{i(),n()},children:o})]})]})})]})}},1062:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(3827),s=n(4090),i=n(1151),l=n(129),r=n(6576);function o(e){let{value:t,onChange:n,options:o,disabled:c=!1,className:d="",placeholder:m="Select an option",error:u,id:x}=e,h=o.find(e=>e.value===t);return(0,a.jsx)(i.R,{value:t,onChange:n,disabled:c,children:e=>{let{open:t}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(i.R.Button,{id:x,className:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ".concat(u?"ring-red-500":"ring-gray-300"," focus:outline-none focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6 ").concat(c?"bg-gray-50":""," ").concat(d),children:[(0,a.jsx)("span",{className:"block truncate",children:h?h.label:m}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,a.jsx)(r.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,a.jsx)(l.u,{show:t,as:s.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(i.R.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:o.map(e=>(0,a.jsx)(i.R.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-3 pr-9 ".concat(t?"bg-indigo-600 text-white":"text-gray-900")},value:e.value,children:t=>{let{selected:n,active:s}=t;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:"block truncate ".concat(n?"font-semibold":"font-normal"),children:e.label})})}},e.value))})})]})}})}},1352:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(3827),s=n(4090),i=n(5183),l=n(4424);function r(e){let{value:t,onChange:n,name:r,onNameChange:o,onDelete:c,className:d=""}=e,[m,u]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),[g,v]=(0,s.useState)(i.DD),[f,p]=(0,s.useState)("09:00"),[y,b]=(0,s.useState)("17:00");(0,s.useEffect)(()=>{var e,n;u((null==t?void 0:null===(e=t.daysOfWeek)||void 0===e?void 0:e.length)===0),h((null==t?void 0:t.startTime)===null&&(null==t?void 0:t.endTime)===null),v((null==t?void 0:null===(n=t.daysOfWeek)||void 0===n?void 0:n.length)===0?i.DD:(null==t?void 0:t.daysOfWeek)||i.DD),p((null==t?void 0:t.startTime)||"09:00"),b((null==t?void 0:t.endTime)||"17:00")},[t]);let j=(0,s.useCallback)(()=>{n({daysOfWeek:m?i.DD:g,startTime:x?null:f,endTime:x?null:y,timezone:t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone})},[x,m,g,f,y,t,n]);return(0,s.useEffect)(()=>{j()},[j]),(0,a.jsxs)("div",{className:"space-y-4 ".concat(d),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[c&&(0,a.jsx)("button",{type:"button",onClick:c,className:"text-gray-400 hover:text-gray-500",children:(0,a.jsx)(l.Z,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"relative rounded-md shadow-sm",children:(0,a.jsx)("input",{type:"text",value:r,onChange:e=>null==o?void 0:o(e.target.value),className:"block w-40 rounded-md border-0 px-3 py-1.5 text-sm text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600",placeholder:"Time Slot Name"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"From"}),(0,a.jsx)("div",{className:"relative rounded-md shadow-sm w-24",children:(0,a.jsx)("input",{type:"time",value:f,onChange:e=>p(e.target.value),className:"block w-full rounded-md border-0 py-1.5 text-sm text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 px-2",disabled:x})}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"to"}),(0,a.jsx)("div",{className:"relative rounded-md shadow-sm w-24",children:(0,a.jsx)("input",{type:"time",value:y,onChange:e=>b(e.target.value),className:"block w-full rounded-md border-0 py-1.5 text-sm text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 px-2",disabled:x})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:x,onChange:e=>{h(e.target.checked)},className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",id:"any-time"}),(0,a.jsx)("label",{htmlFor:"any-time",className:"text-sm text-gray-700 whitespace-nowrap",children:"Any Time"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pl-[37px]",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:i.sb.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:g.includes(e.value),onChange:t=>{t.target.checked?v([...g,e.value]):v(g.filter(t=>t!==e.value))},disabled:m,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.label.slice(0,3)})]},e.value))}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:m,onChange:e=>{u(e.target.checked),v([0,1,2,3,4,5,6])},className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",id:"all-days"}),(0,a.jsx)("label",{htmlFor:"all-days",className:"text-sm text-gray-700 whitespace-nowrap",children:"All Days"})]})]})]})}},4895:function(e,t,n){n.d(t,{Wi:function(){return s},yt:function(){return i},ld:function(){return l}});var a=n(3827);function s(e){let{label:t,htmlFor:n,error:s,children:i}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:n,className:"block text-sm font-medium leading-6 text-gray-900",children:t}),(0,a.jsx)("div",{className:"mt-2",children:i}),s&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-500",children:s})]})}function i(e){let{className:t="",error:n,...s}=e;return(0,a.jsx)("input",{...s,className:"block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ".concat(n?"ring-red-500":"ring-gray-300"," placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 ").concat(t)})}function l(e){let{className:t="",error:n,...s}=e;return(0,a.jsx)("textarea",{...s,className:"block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ".concat(n?"ring-red-500":"ring-gray-300"," placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 ").concat(t)})}},9631:function(e,t,n){n.d(t,{Cc:function(){return T},ZP:function(){return D},o4:function(){return E}});var a=n(3827),s=n(4090),i=n(8504),l=n(1067),r=n(7474),o=n(5548),c=n(4424),d=n(1310),m=n(129),u=n(6170),x=n(8621),h=n(5183);function g(){return{methodIds:[],timeslot:(0,h.vY)(),settings:"{}"}}function v(){return{methodIds:[],timeslot:(0,h.vY)(),settings:"{}"}}var f=n(4849),p=n(1581),y=n(1062),b=n(4895),j=n(3652),N=n(1352);let w=[{value:"SIMPLE",label:"Simple"},{value:"TIME_BASED",label:"Time-based"}];function k(e){var t;let{channel:n,onClose:i,onSave:l}=e,[r,o]=(0,s.useState)((null==n?void 0:n.name)||""),[c,h]=(0,s.useState)((null==n?void 0:n.type)||"SIMPLE"),[k,C]=(0,s.useState)((null==n?void 0:n.description)||""),[T,E]=(0,s.useState)((null==n?void 0:n.settings)||"{}"),[S,D]=(0,s.useState)(()=>((null==n?void 0:n.slots)||["SIMPLE"===c?v():g()]).map(e=>{let t;if("string"==typeof e.timeslot)try{t=JSON.parse(e.timeslot)}catch(e){console.error("Failed to parse timeslot:",e),t={daysOfWeek:[],startTime:"09:00",endTime:"17:00",timezone:""}}else t=e.timeslot;return{...e,deliveryMethods:[],timeRange:t}})),[M,A]=(0,s.useState)(null),[I,Z]=(0,s.useState)({}),[O,F]=(0,s.useState)({}),P=(0,s.useRef)({});(0,s.useEffect)(()=>{(null==n?void 0:n.slots)&&(async()=>{D(await Promise.all(S.map(async e=>{var t;if(null===(t=e.methodIds)||void 0===t?void 0:t.length){let t=await Promise.all(e.methodIds.map(e=>p.x.getById(e.toString())));return{...e,deliveryMethods:t}}return e})))})().catch(console.error)},[n,S]);let L=e=>{var t;null===(t=P.current[e])||void 0===t||t.openDialog()},R=(e,t)=>{D(n=>n.map((n,a)=>a===e?{...n,timeRange:t}:n))},W=(e,t)=>{D(n=>{let a=[...n];return a[e]||(a[e]=g()),a[e]={...a[e],deliveryMethods:t},a})},B=e=>{(0!==e||"TIME_BASED"!==c)&&D(t=>t.filter((t,n)=>n!==e))},V=()=>{let e={},t={},n=!0;if("SIMPLE"===c){var a,s;(null===(s=S[0])||void 0===s?void 0:null===(a=s.deliveryMethods)||void 0===a?void 0:a.length)||(t[0]="Please select at least one delivery method",n=!1)}return"TIME_BASED"===c&&(S.length<=1&&(A("Please create at least one time slot"),n=!1),S.forEach((a,s)=>{var i,l,r,o,c;if(0===s){(null===(l=a.deliveryMethods)||void 0===l?void 0:l.length)||(t[s]="Please select at least one delivery method for fallback slot",n=!1);return}if((null===(i=a.deliveryMethods)||void 0===i?void 0:i.length)||(t[s]="Please select at least one delivery method",n=!1),a.timeRange){let t=!a.timeRange.startTime||!a.timeRange.endTime,i=!(null===(r=a.timeRange.daysOfWeek)||void 0===r?void 0:r.length)||(null===(o=a.timeRange.daysOfWeek)||void 0===o?void 0:o.length)===7,l=!(null===(c=a.timeRange.daysOfWeek)||void 0===c?void 0:c.length);t&&i&&(e[s]="You cannot select all days without specifying a time range in a day",n=!1),!t&&a.timeRange.startTime&&a.timeRange.endTime&&a.timeRange.startTime>=a.timeRange.endTime&&(e[s]="Invalid time range in a day",n=!1),!i&&l&&(e[s]="Please select at least one day",n=!1)}})),Z(e),F(t),n},z=async e=>{if(e.preventDefault(),A(null),Z({}),F({}),V())try{JSON.parse(T);let e={name:r,type:c,description:k,settings:T,slots:S.map(e=>{let{id:t,channelId:n,deliveryMethods:a,timeRange:s,...i}=e;return{...i,methodIds:(null==a?void 0:a.map(e=>"string"==typeof e.id?parseInt(e.id,10):e.id))||[],timeslot:{daysOfWeek:(null==s?void 0:s.daysOfWeek)||[],startTime:(null==s?void 0:s.startTime)||null,endTime:(null==s?void 0:s.endTime)||null,timezone:(null==s?void 0:s.timezone)||"Asia/Shanghai"},settings:i.settings||"{}"}})};n?await f.q.update(n.id,e):await f.q.create(e),l()}catch(e){e instanceof SyntaxError?A("Invalid JSON format in settings"):(A("Failed to save channel"),console.error(e))}};return(0,s.useEffect)(()=>{0===S.length&&D(["SIMPLE"===c?v():g()].map(e=>({...e,deliveryMethods:[]})))},[S.length,c]),(0,a.jsx)(m.u.Root,{show:!0,as:s.Fragment,children:(0,a.jsxs)(u.V,{as:"div",className:"relative z-10",onClose:()=>{},children:[(0,a.jsx)(m.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,a.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,a.jsx)(m.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)(u.V.Panel,{className:"relative transform overflow-hidden bg-white px-4 pb-4 pt-5 text-left transition-all sm:my-8 sm:w-full sm:max-w-2xl sm:p-6",children:[(0,a.jsx)("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block",children:(0,a.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:i,children:[(0,a.jsx)("span",{className:"sr-only",children:"Close"}),(0,a.jsx)(x.Z,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,a.jsxs)("form",{onSubmit:z,children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"mt-3 sm:mt-5",children:[(0,a.jsx)(u.V.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:n?"Edit Channel":"Add Channel"}),(0,a.jsxs)("div",{className:"mt-4 space-y-6",children:[(0,a.jsx)(b.Wi,{label:"Name",htmlFor:"name",children:(0,a.jsx)(b.yt,{id:"name",value:r,onChange:e=>o(e.target.value),placeholder:"Enter a name for this channel",required:!0})}),(0,a.jsx)(b.Wi,{label:"Type",htmlFor:"type",children:(0,a.jsx)(y.Z,{id:"type",value:c,onChange:e=>{h(e),"SIMPLE"===e?D([v()]):D([g()])},options:w,disabled:!!n})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"SIMPLE"===c?"Delivery Methods":"Time Slots"}),"TIME_BASED"===c&&(0,a.jsx)("button",{type:"button",onClick:()=>{D(e=>[...e,v()])},className:"text-sm text-indigo-600 hover:text-indigo-500",children:"Add Time Slot"}),"SIMPLE"===c&&(0,a.jsxs)("button",{type:"button",onClick:()=>L(0),className:"inline-flex items-center text-sm text-indigo-600 hover:text-indigo-500",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),"Add Method"]})]}),"TIME_BASED"===c&&(0,a.jsxs)("div",{className:"space-y-4",children:[S.slice(1).map((e,t)=>(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)(N.Z,{value:e.timeRange||{daysOfWeek:[],startTime:"09:00",endTime:"17:00",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},onChange:e=>R(t+1,e),name:"Time Slot ".concat(t+1),onNameChange:e=>{},onDelete:()=>B(t+1)}),I[t+1]&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",children:I[t+1]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-gray-900",children:"Delivery Methods"}),(0,a.jsxs)("button",{type:"button",onClick:()=>L(t+1),className:"inline-flex items-center text-sm text-indigo-600 hover:text-indigo-500",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),"Add Method"]})]}),(0,a.jsx)(j.Z,{ref:e=>P.current[t+1]=e,value:e.deliveryMethods||[],onChange:e=>W(t+1,e),hideAddButton:!0}),O[t+1]&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",children:O[t+1]})]})]},t+1)),(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-gray-900",children:"Fallback Time Slot"}),(0,a.jsxs)("button",{type:"button",onClick:()=>L(0),className:"inline-flex items-center text-sm text-indigo-600 hover:text-indigo-500",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),"Add Method"]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(j.Z,{ref:e=>P.current[0]=e,value:(null===(t=S[0])||void 0===t?void 0:t.deliveryMethods)||[],onChange:e=>W(0,e),hideAddButton:!0}),O[0]&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",children:O[0]})]})]})]}),"SIMPLE"===c&&S.map((e,t)=>(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)(j.Z,{ref:e=>P.current[t]=e,value:e.deliveryMethods||[],onChange:e=>W(t,e),hideAddButton:!0}),O[t]&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",children:O[t]})]},t))]}),(0,a.jsx)(b.Wi,{label:"Description",htmlFor:"description",children:(0,a.jsx)(b.ld,{id:"description",value:k,onChange:e=>C(e.target.value),rows:3,placeholder:"Enter a description for this channel"})})]})]})}),(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[(0,a.jsx)("button",{type:"button",onClick:i,className:"text-sm font-semibold leading-6 text-gray-900",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:n?"Update":"Create"})]})]})]})})})})]})})}var C=n(7490);let T={SIMPLE:i.Z,TIME_BASED:l.Z};function E(e){return"TIME_BASED"===e?"A time-based channel":"A simple channel"}function S(e){let{channel:t,onEdit:n,onDelete:s}=e,i=T[t.type];return(0,a.jsx)("div",{className:"bg-white border rounded-lg shadow-sm hover:shadow transition-all duration-200",children:(0,a.jsxs)("div",{className:"relative flex justify-between gap-x-6 py-5 px-4",children:[(0,a.jsxs)("div",{className:"flex min-w-0 gap-x-4",children:[(0,a.jsx)("div",{className:"h-12 w-12 flex items-center justify-center rounded-lg bg-gray-50",children:i&&(0,a.jsx)(i,{className:"h-6 w-6 text-gray-600","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("p",{className:"text-sm font-semibold leading-6 text-gray-900",children:t.name}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:E(t.type)})]}),t.description&&(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500 line-clamp-2",children:t.description})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-x-4",children:(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsx)("button",{type:"button",className:"rounded p-1 hover:bg-gray-100 group relative",children:(0,a.jsx)(r.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("button",{type:"button",onClick:n,className:"rounded p-1 hover:bg-gray-100 group relative",children:(0,a.jsx)(o.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("button",{type:"button",onClick:s,className:"rounded p-1 hover:bg-gray-100 group relative",children:(0,a.jsx)(c.Z,{className:"h-5 w-5 text-gray-400"})})]})})]})})}function D(e){let{channels:t,onChannelsChange:n}=e,[i,l]=(0,s.useState)(null),[r,o]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null),[u,x]=(0,s.useState)(!1),h=e=>{l(e),x(!0)},g=async e=>{try{await f.q.delete(e.id),n()}catch(e){console.error("Failed to delete channel:",e)}},v=()=>{x(!1),l(null)},p=async()=>{n(),v()};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mt-4 space-y-2",children:t.map(e=>(0,a.jsx)(S,{channel:e,onEdit:()=>h(e),onDelete:()=>{m(e),o(!0)}},e.id))}),(0,a.jsxs)("button",{type:"button",onClick:()=>x(!0),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"Add Channel"]}),u&&(0,a.jsx)(k,{channel:i,onClose:v,onSave:p}),(0,a.jsx)(C.Z,{isOpen:r,onClose:()=>{o(!1),m(null)},onConfirm:()=>{c&&g(c),o(!1),m(null)},title:"Delete Channel",message:"Are you sure you want to delete this channel? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmButtonClassName:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500"})]})}},3652:function(e,t,n){n.d(t,{Z:function(){return y}});var a=n(3827),s=n(4090),i=n(1581),l=n(129),r=n(6170),o=n(8504),c=n(2707);let d=s.forwardRef(function(e,t){let{title:n,titleId:a,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),n?s.createElement("title",{id:a},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}),m=s.forwardRef(function(e,t){let{title:n,titleId:a,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),n?s.createElement("title",{id:a},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))});var u=n(32),x=n(4772),h=n(7474),g=n(4424),v=n(1310),f=n(8621);function p(e){let{method:t,onRemove:n,onClick:i,className:l="",isButton:r=!1}=e,v=function(e){switch(e){case"DOVEAPP":default:return o.Z;case"EMAIL":return c.Z;case"TEXT":return d;case"VOICE":return m;case"WEBHOOK":return u.Z;case"PLUGIN":return x.Z}}(t.type),[f,p]=(0,s.useState)(!1),y=r?"text-sm text-gray-500":"text-xs text-gray-500";return(0,a.jsxs)(r?"button":"div",{className:"flex items-start space-x-3 bg-white rounded-lg border border-gray-200 ".concat(r?"w-full text-left hover:bg-gray-50":""," ").concat(r?"p-4 hover:bg-gray-50":"p-2"," ").concat(l),onClick:i,...r?{type:"button"}:{},children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(v,{className:"".concat(r?"h-6 w-6":"h-5 w-5"," text-gray-400")})}),(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-baseline",children:[(0,a.jsx)("span",{className:"".concat(r?"text-base":"text-sm"," font-medium text-gray-900"),children:t.name}),(0,a.jsx)("span",{className:"".concat(y," ml-1"),children:function(e){switch(e.type){case"DOVEAPP":return"Deliver using DoveApp";case"EMAIL":return"Deliver via email".concat(e.config.email?" to ".concat(e.config.email):"");case"TEXT":return"Deliver via SMS".concat(e.config.phone?" to ".concat(e.config.phone.phoneNumber):"");case"VOICE":return"Deliver via voice call".concat(e.config.phone?" to ".concat(e.config.phone.phoneNumber):"");case"WEBHOOK":return"Deliver via webhook";case"PLUGIN":if(e.config.plugin)switch(e.config.plugin.type){case"SLACK":return"Deliver to Slack".concat(e.config.plugin.slackChannel?" channel ".concat(e.config.plugin.slackChannel):"");case"TELEGRAM":return"Deliver via Telegram";case"CUSTOM_WEBHOOK":return"Deliver via custom webhook"}return"Deliver via plugin";default:return"Deliver notification"}}(t)})]}),t.description?(0,a.jsxs)("div",{className:"relative mt-0.5",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[(0,a.jsx)("p",{className:"".concat(y," truncate max-w-[300px]"),children:t.description}),f&&t.description.length>50&&(0,a.jsx)("div",{className:"absolute z-10 px-2 py-1 text-sm text-white bg-gray-900 rounded shadow-lg -mt-1 transform -translate-y-full max-w-xs",children:t.description})]}):(0,a.jsxs)("div",{className:"flex items-center mt-0.5 text-gray-400",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),(0,a.jsx)("span",{className:"".concat(y," italic"),children:"No description available"})]})]})}),n&&(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),n()},className:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-500",children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})})]})}var y=(0,s.forwardRef)(function(e,t){let{value:n=[],onChange:o,className:c="",hideAddButton:d=!1}=e,[m,u]=(0,s.useState)(!1),[x,h]=(0,s.useState)([]),[g,y]=(0,s.useState)(null);(0,s.useImperativeHandle)(t,()=>({openDialog:()=>u(!0)}),[]),(0,s.useEffect)(()=>{(async()=>{try{let e=await i.x.getAll();h(e)}catch(e){console.error("Failed to fetch delivery methods:",e)}})()},[]);let b=e=>{let t=x.find(t=>t.id===e);t&&(o([...n,t]),u(!1))},j=e=>{o(n.filter(t=>t.id!==e))},N=x.filter(e=>!n.some(t=>t.id===e.id));return(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)("div",{className:"space-y-2",children:0===n.length?(0,a.jsx)("div",{className:"rounded-lg border border-dashed border-gray-300 p-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center text-italic",children:"No delivery method is selected"})}):n.map(e=>(0,a.jsx)(p,{method:e,onRemove:()=>j(e.id)},e.id))}),!d&&(0,a.jsxs)("button",{type:"button",onClick:()=>u(!0),disabled:0===N.length,className:"mt-2 inline-flex items-center text-sm text-indigo-600 hover:text-indigo-500",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 mr-1"}),"Add Method"]}),(0,a.jsx)(l.u.Root,{show:m,as:s.Fragment,children:(0,a.jsxs)(r.V,{as:"div",className:"relative z-50",onClose:u,children:[(0,a.jsx)(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(r.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(r.V.Title,{as:"h3",className:"text-lg font-medium text-gray-900",children:"Select Delivery Method"}),(0,a.jsx)("button",{type:"button",onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-500",children:(0,a.jsx)(f.Z,{className:"h-6 w-6"})})]}),(0,a.jsx)("div",{className:"mt-4 space-y-2",children:0===N.length?(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No more delivery methods available."}):N.map(e=>(0,a.jsx)(p,{method:e,isButton:!0,onClick:()=>b(e.id)},e.id))})]})})})})]})})]})})},5183:function(e,t,n){n.d(t,{DD:function(){return s},sb:function(){return a},vY:function(){return i}});let a=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],s=[];function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Intl.DateTimeFormat().resolvedOptions().timeZone;return{startTime:null,endTime:null,daysOfWeek:s,timezone:e}}},8504:function(e,t,n){var a=n(4090);let s=a.forwardRef(function(e,t){let{title:n,titleId:s,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?a.createElement("title",{id:s},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"}))});t.Z=s},1067:function(e,t,n){var a=n(4090);let s=a.forwardRef(function(e,t){let{title:n,titleId:s,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?a.createElement("title",{id:s},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=s}}]);