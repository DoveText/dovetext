"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7521],{7907:function(e,t,n){var a=n(5313);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},7387:function(e,t,n){n.d(t,{z:function(){return s}});let a=[{id:1,name:"Welcome Email",type:"email",subject:"Welcome to Dove Text!",content:"Hi {{name}},\n\nWelcome to Dove Text! We're excited to have you on board.\n\nBest regards,\nThe Dove Text Team",variables:["name"],createdAt:"2023-01-01T00:00:00Z",updatedAt:"2023-01-01T00:00:00Z",isDefault:!0},{id:2,name:"Password Reset",type:"email",subject:"Password Reset Request",content:"Hi {{name}},\n\nYou requested a password reset. Click the link below to reset your password:\n\n{{resetLink}}\n\nIf you didn't request this, please ignore this email.\n\nBest regards,\nThe Dove Text Team",variables:["name","resetLink"],createdAt:"2023-01-02T00:00:00Z",updatedAt:"2023-01-02T00:00:00Z",isDefault:!1},{id:3,name:"Account Verification SMS",type:"sms",content:"Your Dove Text verification code is: {{code}}. Valid for 10 minutes.",variables:["code"],createdAt:"2023-01-03T00:00:00Z",updatedAt:"2023-01-03T00:00:00Z",isDefault:!0},{id:4,name:"Appointment Reminder",type:"voice",content:"Hello {{name}}. This is a reminder about your appointment scheduled for {{time}} on {{date}}. Please press 1 to confirm or 2 to reschedule.",variables:["name","time","date"],createdAt:"2023-01-04T00:00:00Z",updatedAt:"2023-01-04T00:00:00Z",isDefault:!0},{id:5,name:"Event Notification",type:"webhook",content:'{\n  "event": "{{eventType}}",\n  "userId": "{{userId}}",\n  "timestamp": "{{timestamp}}",\n  "data": {\n    "message": "{{message}}"\n  }\n}',variables:["eventType","userId","timestamp","message"],createdAt:"2023-01-05T00:00:00Z",updatedAt:"2023-01-05T00:00:00Z",isDefault:!0},{id:6,name:"Slack Notification",type:"plugin",content:'{\n  "blocks": [\n    {\n      "type": "section",\n      "text": {\n        "type": "mrkdwn",\n        "text": "*{{title}}*\\n{{message}}"\n      }\n    }\n  ]\n}',variables:["title","message"],createdAt:"2023-01-06T00:00:00Z",updatedAt:"2023-01-06T00:00:00Z",isDefault:!0}],s={getAllTemplates:async()=>new Promise(e=>{setTimeout(()=>{e([...a])},500)}),getTemplatesByType:async e=>new Promise(t=>{setTimeout(()=>{t(a.filter(t=>t.type===e))},500)}),getTemplateById:async e=>new Promise((t,n)=>{setTimeout(()=>{let s=a.find(t=>t.id===e);s?t({...s}):n(Error("Template not found"))},500)}),createTemplate:async e=>new Promise(t=>{setTimeout(()=>{let n={id:Math.max(...a.map(e=>e.id))+1,name:e.name,type:e.type,subject:e.subject,content:e.content,variables:r(e.content),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!1};a.push(n),t({...n})},500)}),updateTemplate:async e=>new Promise((t,n)=>{setTimeout(()=>{let s=a.findIndex(t=>t.id===e.id);if(-1!==s){let n={...a[s],...e,updatedAt:new Date().toISOString()};e.content&&(n.variables=r(e.content)),a[s]=n,t({...n})}else n(Error("Template not found"))},500)}),deleteTemplate:async e=>new Promise((t,n)=>{setTimeout(()=>{let s=a.findIndex(t=>t.id===e);-1!==s?(a.splice(s,1),t()):n(Error("Template not found"))},500)}),setDefaultTemplate:async e=>new Promise((t,n)=>{setTimeout(()=>{let s=a.find(t=>t.id===e);if(!s){n(Error("Template not found"));return}a.forEach(e=>{e.type===s.type&&(e.isDefault=!1)}),s.isDefault=!0,t({...s})},500)}),testTemplate:async(e,t)=>new Promise((n,s)=>{setTimeout(()=>{let r=a.find(t=>t.id===e);if(!r){s(Error("Template not found"));return}let o=r.content;Object.keys(t).forEach(e=>{let n=RegExp("{{".concat(e,"}}"),"g");o=o.replace(n,t[e])}),n(o)},500)})};function r(e){let t;let n=/{{([^}]+)}}/g,a=[];for(;null!==(t=n.exec(e));)a.includes(t[1])||a.push(t[1]);return a}},9304:function(e,t,n){var a=n(3827),s=n(4090);t.Z=e=>{let{template:t,onSubmit:n,onCancel:r,isSubmitting:o}=e,[i,l]=(0,s.useState)({name:"",type:"email",content:"",...t}),[d,m]=(0,s.useState)({}),[c,u]=(0,s.useState)((null==t?void 0:t.variables)||[]);(0,s.useEffect)(()=>{i.content&&u(x(i.content))},[i.content]);let p=(e,t)=>{l(n=>({...n,[e]:t})),d[e]&&m(t=>{let n={...t};return delete n[e],n})},f=()=>{let e={};return i.name||(e.name="Name is required"),i.type||(e.type="Type is required"),i.content||(e.content="Content is required"),"email"!==i.type||i.subject||(e.subject="Subject is required for email templates"),m(e),0===Object.keys(e).length},b=async e=>{e.preventDefault(),f()&&await n(i)},x=e=>{let t;let n=/{{([^}]+)}}/g,a=[];for(;null!==(t=n.exec(e));)a.includes(t[1])||a.push(t[1]);return a};return(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:e=>p("name",e.target.value),className:"block w-full rounded-md border border-gray-500 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"e.g., Welcome Email",required:!0}),d.name&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.name})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Type"}),(0,a.jsxs)("select",{id:"type",name:"type",value:i.type||"email",onChange:e=>p("type",e.target.value),className:"block w-full rounded-md border border-gray-500 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0,disabled:!!t,children:[(0,a.jsx)("option",{value:"email",children:"Email"}),(0,a.jsx)("option",{value:"sms",children:"SMS"}),(0,a.jsx)("option",{value:"voice",children:"Voice"}),(0,a.jsx)("option",{value:"webhook",children:"Webhook"}),(0,a.jsx)("option",{value:"plugin",children:"Plugin"})]}),d.type&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.type})]}),"email"===i.type&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,a.jsx)("input",{type:"text",id:"subject",name:"subject",value:i.subject||"",onChange:e=>p("subject",e.target.value),className:"block w-full rounded-md border border-gray-500 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"e.g., Welcome to Dove Text!",required:!0}),d.subject&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.subject})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),(0,a.jsx)("textarea",{id:"content",name:"content",value:i.content||"",onChange:e=>p("content",e.target.value),className:"block w-full rounded-md border border-gray-500 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",rows:10,placeholder:"Enter template content here. Use {{variable}} syntax for variables.",required:!0}),d.content&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.content}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Variables:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:c.length>0?c.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},e)):(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["No variables detected. Use ",{variable}," syntax to add variables."]})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-5",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:o,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:o,children:o?"Saving...":t?"Update Template":"Create Template"})]})]})}},9643:function(e,t,n){var a=n(4090);let s=a.forwardRef(function(e,t){let{title:n,titleId:s,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),n?a.createElement("title",{id:s},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});t.Z=s},3536:function(e,t,n){var a=n(4090);let s=a.forwardRef(function(e,t){let{title:n,titleId:s,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),n?a.createElement("title",{id:s},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))});t.Z=s}}]);